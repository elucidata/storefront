!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Storefront=e()}}(function(){return function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return r(n?n:e)},h,h.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t){var n=e("./lib/runtime");t.exports=new n},{"./lib/runtime":12}],2:[function(e,t){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift(),i=t[n];e.forEach(function(e){t[e]=i})}},{}],3:[function(e,t){var n=e("elucidata-type");t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return e.forEach(function(e){var i=t[e];i&&n.isFunction(i)&&(t[e]=i.bind(t))}),t}},{"elucidata-type":16}],4:[function(e,t){t.exports=function(e){return e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t?t.toUpperCase():""})}},{}],5:[function(e,t){(function(n){var i=e("./camelize"),r=e("./flatten");t.exports=function(e,t,s){var o=e+":"+t,a={name:o,"public":{},emit:function(){var e=Array.prototype.slice.call(arguments);e.unshift(o),n.nextTick(function(){s.emit.apply(s,e)})},emitNow:function(){var e=Array.prototype.slice.call(arguments);e.unshift(o),s.emit.apply(s,e)},emitFlat:function(){var e=r([o].concat(Array.prototype.slice.call(arguments)));n.nextTick(function(){s.emit.apply(s,e)})}};return a.public["on"+i(t)]=function(e){s.on(o,e)},a.public["off"+i(t)]=function(e){s.removeListener(o,e)},a}}).call(this,e("_process"))},{"./camelize":4,"./flatten":8,_process:15}],6:[function(e,t){(function(n){function i(){"use strict";this.$Dispatcher_handlers={},this.$Dispatcher_processed={},this.$Dispatcher_tokenList=[],this.$Dispatcher_queue=[],this.active=!1}var r=e("./uid"),s=e("./now"),o=10;i.prototype.$Dispatcher_destructor=function(){"use strict";this.$Dispatcher_handlers=null,this.$Dispatcher_processed=null,this.$Dispatcher_tokenList=null,this.$Dispatcher_queue=null,this.active=!1},i.prototype.dispose=function(){"use strict";this.$Dispatcher_destructor()},i.prototype.register=function(e,t){"use strict";t&&this.$Dispatcher_handlers.hasOwnProperty(t)&&(t=r());var n=t||r();return this.$Dispatcher_handlers[n]=e,this.$Dispatcher_tokenList=Object.keys(this.$Dispatcher_handlers),n},i.prototype.deregister=function(e){"use strict";var t;return(t=this.$Dispatcher_handlers[e])&&delete this.$Dispatcher_handlers[e],t},i.prototype.waitFor=function(e){"use strict";if(!this.active)return this;for(var t=0,n=e.length;n>t;t++){var i=e[t].token||e[t];this.$Dispatcher_callHandler(i)}return this},i.prototype.dispatch=function(e,t){"use strict";if(this.active)return this.$Dispatcher_queue.push([e,t]),this;var i,r,a=this.$Dispatcher_tokenList.length,c=0;if(a){for(i=s(),this.active=!0,this.$Dispatcher_currentAction=e,this.$Dispatcher_processed={};a>c;)this.$Dispatcher_callHandler(this.$Dispatcher_tokenList[c]),c+=1;this.$Dispatcher_currentAction=null,this.active=!1,r=s()-i,r>o&&n.console.info("Dispatch of",e.type,"took >",o,"ms")}if(t&&t(),this.$Dispatcher_queue.length){var u=this.$Dispatcher_queue.shift();this.dispatch(u[0],u[1])}return this},i.prototype.$Dispatcher_callHandler=function(e){"use strict";if(this.$Dispatcher_processed[e]!==!0&&this.active){var t=this.$Dispatcher_handlers[e];t.call(this,this.$Dispatcher_currentAction,this,e),this.$Dispatcher_processed[e]=!0}},i.getInstance=function(){"use strict";return null===a&&(a=new i),a};var a=null;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./now":11,"./uid":13}],7:[function(e,t){var n=e("./camelize");t.exports=function(e){return{onStoreEvent:function(t,i,r){t=t.name||t;var s,o=e.getInstance(t);o&&(i=n(i),(s=o["on"+i])?(s(r),this._storeListeners||(this._storeListeners=[]),this._storeListeners.push({storeName:t,eventName:i,callback:r})):e.settings.verbose&&console.warn("Storefront: Event",i,"isn't supported by store:",t))},componentWillUnmount:function(){this._storeListeners&&(this._storeListeners.forEach(function(t){var n=t,i=n.storeName,r=n.eventName,s=n.callback,o=e.getInstance(i);o["off"+r](s)}),this._storeListeners.length=0,this._storeListeners=null)}}}},{"./camelize":4}],8:[function(e,t){t.exports=function(e){var t=[];return t.concat.apply(t,e)}},{}],9:[function(e,t){(function(n){var i=(e("./merge"),e("./alias")),r=e("./bind-all"),s=e("./camelize"),o=e("elucidata-type");t.exports=function(){function e(e,t,n){"use strict";this.runtime=e,this.name=t,this.$Manager_instance=n,this.$Manager_handlers={},this.$Manager_notifyEvent=e.createEvent(t,"notify"),this.$Manager_changeEvent=e.createEvent(t,"change"),this.expose(this.$Manager_notifyEvent.public),this.expose(this.$Manager_changeEvent.public),r(this,"dispatch","notify","action","handle","waitFor","hasChanged","expose","getClerk","getStore","createEvent"),i(this,"action","actions"),i(this,"getStore","get"),i(this,"handle","handles","observe","observes"),i(this,"expose","exposes","provide","provides"),i(this,"createEvent","defineEvent"),i(this,"hasChanged","dataDidChange","dataHasChanged"),null==n.token&&(n.token=e.dispatcher.register(function(e){var t;(t=this.$Manager_handlers[e.type])&&t(e)}.bind(this)))}return e.prototype.dispatch=function(e,t,i){"use strict";this.runtime.settings.aysncDispatch?n.nextTick(function(){this.runtime.dispatcher.dispatch({origin:this.name,type:e,payload:t},i)}.bind(this)):this.runtime.dispatcher.dispatch({origin:this.name,type:e,payload:t},i)},e.prototype.notify=function(e){"use strict";this.$Manager_notifyEvent.emit(e)},e.prototype.action=function(e){"use strict";Object.keys(e).forEach(function(t){var n=this.name+"_"+t,i=e[t],r=this.dispatch.bind(this,n);i.displayName=n,this.$Manager_instance[t]=i.bind(this.$Manager_instance,r)}.bind(this))},e.prototype.handle=function(e,t){"use strict";1===arguments.length?(t=e,e=this.name):o.isObject(e)&&(e=e.name),Object.keys(t).forEach(function(n){var i=e+"_"+n,r=t[n];if(this.$Manager_handlers[i]=r,e==this.name&&!this.$Manager_instance[n]){var s={};s[n]=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();t(1===e.length?e[0]:e)},this.action(s)}}.bind(this))},e.prototype.waitFor=function(){"use strict";for(var e=[],t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);e=e.map(function(e){return o.isString(e)?this.runtime.get(e):e}.bind(this)),this.runtime.dispatcher.waitFor(e)},e.prototype.hasChanged=function(){"use strict";this.$Manager_changeEvent.emitFlat(arguments)},e.prototype.expose=function(e){"use strict";Object.keys(e).forEach(function(t){if(this.$Manager_instance.hasOwnProperty(t)){var n=new Error("Redefining property "+t+" on store "+this.name);throw n.framesToPop=3,n}this.$Manager_instance[t]=e[t]}.bind(this))},e.prototype.getClerk=function(){"use strict";return this.$Manager_instance},e.prototype.getStore=function(e){"use strict";return e?this.runtime.get(e,!0):this.$Manager_instance},e.prototype.createEvent=function(e){"use strict";var t=this.runtime.createEvent(name,e),n=t.emit.bind(t);return this.expose(t.public),this.$Manager_instance["emit"+s(e)]=n,n},e.prototype.resetInternals=function(){"use strict";this.$Manager_handlers={},this.$Manager_instance.token&&this.runtime.dispatcher.deregister(this.$Manager_instance.token),Object.keys(this.$Manager_instance).forEach(function(e){"name"!==e&&delete this.$Manager_instance[e]}.bind(this))},e}()}).call(this,e("_process"))},{"./alias":2,"./bind-all":3,"./camelize":4,"./merge":10,_process:15,"elucidata-type":16}],10:[function(e,t){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return e.forEach(function(e){Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}},{}],11:[function(e,t){var n=function(){return"object"==typeof performance&&performance.now?performance.now.bind(performance):Date.now?Date.now.bind(Date):function(){return(new Date).getTime()}}();t.exports=n},{}],12:[function(e,t){(function(n,i){function r(e){"use strict";o.call(this),this.configure(e),this.$Runtime_registry={},this.$Runtime_managers={},this.$Runtime_builders=[],this.$Runtime_events={},this.$Runtime_anyChangeEvent=this.createEvent("*","any-change"),this.$Runtime_dataChanges=[],this.$Runtime_timer=!1,this.dispatcher=this.settings.singletonDispatcher?s.getInstance():new s,this.mixins={eventHelper:l(this)},p(this,"define","defineStore","Store","defineClerk","Clerk"),p(this,"get","getInstance"),p(this,"onChange","onAnyChange"),p(this,"offChange","offAnyChange")}var s=e("./dispatcher"),o=e("events").EventEmitter,a=e("./manager"),c=e("elucidata-type"),u=(e("./camelize"),e("./merge")),h=(e("./flatten"),e("./uid")),p=e("./alias"),f=(e("./bind-all"),e("./create-event")),l=e("./event-helper-mixin");for(var d in o)o.hasOwnProperty(d)&&(r[d]=o[d]);var m=null===o?null:o.prototype;r.prototype=Object.create(m),r.prototype.constructor=r,r.__superConstructor__=o,r.prototype.configure=function(e){"use strict";this.settings=u({asyncDispatch:!0,freezeInstance:!1,useRAF:!0,verbose:!1,singletonDispatcher:!1},e||{})},r.prototype.newInstance=function(){"use strict";return new r(this.settings)},r.prototype.createEvent=function(e,t){"use strict";var n=f(e,t,this);return this.$Runtime_events[n.name]||(this.$Runtime_events[n.name]=n),this.$Runtime_events[n.name]},r.prototype.knownEvents=function(){"use strict";return Object.keys(this.$Runtime_events)},r.prototype.define=function(e,t){"use strict";return c.isUndefined(t)&&(t=e,e=h()),this.$Runtime_buildFactory(e,t)},r.prototype.get=function(e,t){"use strict";var n=this.$Runtime_registry[e];return n||(this.settings.verbose&&console.warn("Storefront: Store",e,"is not defined."),t===!0&&(this.settings.verbose&&console.info("Building stub for ",e),n={name:e},this.$Runtime_registry[e]=n)),n},r.prototype.getManager=function(e){"use strict";return this.$Runtime_managers[e]},r.prototype.hasStore=function(e){"use strict";return this.$Runtime_registry.hasOwnProperty(e)},r.prototype.onChange=function(e){"use strict";this.$Runtime_anyChangeEvent.public.onAnyChange(e)},r.prototype.offChange=function(e){"use strict";this.$Runtime_anyChangeEvent.public.offAnyChange(e)},r.prototype.size=function(){"use strict";return this.storeNames().length},r.prototype.storeNames=function(){"use strict";return Object.keys(this.$Runtime_registry)},r.prototype.recreateStore=function(e){"use strict";var t=this.getManager(e);return t&&t.resetInternals(),this.$Runtime_builders.filter(function(t){return t.name===e}).forEach(function(e){this.$Runtime_buildFactory(e.name,e.builder,!1)}.bind(this)),this.getInstance(e)},r.prototype.$Runtime_buildFactory=function(e,t,n){"use strict";var i,r=this.$Runtime_registry[e],s=this.$Runtime_managers[e];if(r&&this.settings.verbose&&console.warn(e,"already defined: Merging definitions."),r||(r={name:e},this.$Runtime_registry[e]=r),s||(s=new a(this,e,r),this.$Runtime_managers[e]=s,this.$Runtime_trackChangeFor(e)),c.isFunction(t))i=t(s);else{if(!c.isObject(t))throw new Error("Wrong builder type: Must provide a builder function or object.");i=t}return c.isObject(i)&&s.expose(i),this.settings.freezeInstance===!0&&Object.freeze(r),n!==!1&&this.$Runtime_builders.push({name:e,builder:t,manager:s}),this.getInstance(e)},r.prototype.$Runtime_trackChangeFor=function(e){"use strict";var t=e+":change";this.on(t,function(){this.$Runtime_dataChanges.push({type:t,params:Array.prototype.slice.call(arguments)}),this.$Runtime_timer||(this.settings.useRAF&&i.requestAnimationFrame?requestAnimationFrame(this.$Runtime_relayDataChanges.bind(this)):n.nextTick(this.$Runtime_relayDataChanges.bind(this)),this.$Runtime_timer=!0)}.bind(this))},r.prototype.$Runtime_relayDataChanges=function(){"use strict";this.$Runtime_dataChanges.length&&(this.$Runtime_anyChangeEvent.emitNow(this.$Runtime_dataChanges),this.$Runtime_dataChanges=[]),this.$Runtime_timer=!1},t.exports=r}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./alias":2,"./bind-all":3,"./camelize":4,"./create-event":5,"./dispatcher":6,"./event-helper-mixin":7,"./flatten":8,"./manager":9,"./merge":10,"./uid":13,_process:15,"elucidata-type":16,events:14}],13:[function(e,t){function n(e){var t=Math.floor((new Date).getTime()/1e3);for(e=e||36;i>=t;)t+=1;return i=t,t.toString(e)}var i=0;t.exports=n},{}],14:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),c=1;r>c;c++)a[c-1]=arguments[c];n.apply(this,a)}else if(s(n)){for(r=arguments.length,a=new Array(r-1),c=1;r>c;c++)a[c-1]=arguments[c];for(u=n.slice(),r=u.length,c=0;r>c;c++)u[c].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var r;r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],15:[function(e,t){function n(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var i=[];if(t){var r=document.createElement("div"),s=new MutationObserver(function(){var e=i.slice();i.length=0,e.forEach(function(e){e()})});return s.observe(r,{attributes:!0}),function(e){i.length||r.setAttribute("yes","no"),i.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),i.length>0)){var n=i.shift();n()}},!0),function(e){i.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")}},{}],16:[function(e,t){(function(){var e,n,i,r,s,o,a,c,u;for(u="Boolean Number String Function Array Date RegExp Undefined Null NodeList".split(" "),i=/element$/,o=Object.keys||function(e){var t,n,i;i=[];for(t in e)n=e[t],i.push(t);return i},n=function(){var e,t,n,i,r,s;for(i=Object.prototype.toString,t=/\[object HTML(.*)\]/,e={},r=0,s=u.length;s>r;r++)n=u[r],e["[object "+n+"]"]=n.toLowerCase();return function(n){var r,s;return s=i.call(n),(r=e[s])?r:(r=s.match(t))?r[1].toLowerCase():"object"}}(),c=u.concat(["Object"]),r=function(e){var t;return t=e.toLowerCase(),n["is"+e]=function(e){return n(e)===t},n["isNot"+e]=function(e){return n(e)!==t}},s=0,a=c.length;a>s;s++)e=c[s],r(e);n.isEmpty=function(e){switch(n(e)){case"null":return!0;case"undefined":return!0;case"string":return""===e;case"object":return 0===o(e).length;case"array":return 0===e.length;case"number":return isNaN(e);case"nodelist":return 0===e.length;default:return!1}},n.isNotEmpty=function(e){return!n.isEmpty(e)},n.isElement=function(e){return i.test(n(e))},n.isNotElement=function(e){return!n.isElement(e)},"undefined"!=typeof t&&null!==t?t.exports=n:this.type=n}).call(this)},{}]},{},[1])(1)});