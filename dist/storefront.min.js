!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Storefront=t()}}(function(){return function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e){var n=t("./lib/runtime");e.exports=new n},{"./lib/runtime":15}],2:[function(t,e){e.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),n=t.shift(),i=e[n];t.forEach(function(t){e[t]=i})}},{}],3:[function(t,e){var n=t("elucidata-type");e.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return t.forEach(function(t){var i=e[t];i&&n.isFunction(i)&&(e[t]=i.bind(e))}),e}},{"elucidata-type":19}],4:[function(t,e){e.exports=function(t){return t.replace(/(?:^|[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""})}},{}],5:[function(t,e){(function(t){e.exports=function(t){for(var e,n,i={},r=function(){},s=["memory"],o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profiles","profileEnd","show","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"];e=s.pop();)t[e]=t[e]||i;for(;n=o.pop();)t[n]=t[n]||r;return t}(t.console=t.console||{})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e){(function(n){var i=t("./camelize"),r=t("./flatten");e.exports=function(t,e,s,o){var a=t+":"+e;o=o||{};var c={name:a,"public":{},emit:function(){var t=Array.prototype.slice.call(arguments);t.unshift(a),n.nextTick(function(){s.emit.apply(s,t)})},emitNow:function(){var t=Array.prototype.slice.call(arguments);t.unshift(a),s.emit.apply(s,t)},emitFlat:function(){var t=r([a].concat(Array.prototype.slice.call(arguments)));n.nextTick(function(){s.emit.apply(s,t)})}};return c["public"]["on"+i(e)]=function(t){s.on(a,t)},c["public"]["off"+i(e)]=function(t){s.removeListener(a,t)},c}}).call(this,t("_process"))},{"./camelize":4,"./flatten":11,_process:18}],7:[function(t,e){var n=t("./uid"),i=t("./now"),r=t("./console"),s=10,o=null,a=!1;e.exports=function(){function t(){"use strict";this.active=!1,this.$Dispatcher_handlers={},this.$Dispatcher_processed={},this.$Dispatcher_tokenList=[],this.$Dispatcher_queue=[]}return t.prototype.register=function(t,e){"use strict";e&&this.$Dispatcher_handlers.hasOwnProperty(e)&&(e=n());var i=e||n();return this.$Dispatcher_handlers[i]=t,this.$Dispatcher_tokenList=Object.keys(this.$Dispatcher_handlers),i},t.prototype.deregister=function(t){"use strict";var e;return(e=this.$Dispatcher_handlers[t])&&delete this.$Dispatcher_handlers[t],e},t.prototype.waitFor=function(t){"use strict";return this.active?this:this(t||[]).forEach(function(t){this.$Dispatcher_callHandler(t.token||t)}.bind(this))},t.prototype.dispatch=function(t,e){"use strict";if(this.active)return this.$Dispatcher_queue.push([t,e]),this;var n,o,c,u=this.$Dispatcher_tokenList.length,h=0;if(a&&(c=t.type,r.time(c),r.group(c)),u){for(n=i(),this.active=!0,this.$Dispatcher_currentAction=t,this.$Dispatcher_processed={};u>h;)this.$Dispatcher_callHandler(this.$Dispatcher_tokenList[h]),h+=1;this.$Dispatcher_currentAction=null,this.active=!1,o=i()-n,o>s&&r.info("Dispatch of",t.type,"took >",s,"ms")}if(a&&(r.groupEnd(c),r.timeEnd(c)),e&&e(),this.$Dispatcher_queue.length){var p=this.$Dispatcher_queue.shift(),f=p[0],l=p[1];this.dispatch(f,l)}return this},t.prototype.$Dispatcher_callHandler=function(t){"use strict";if(this.$Dispatcher_processed[t]!==!0&&this.active){var e=this.$Dispatcher_handlers[t];e.call(this,this.$Dispatcher_currentAction,this,t),this.$Dispatcher_processed[t]=!0}},t.getInstance=function(){"use strict";return null===o&&(o=new this),o},t.enableLogging=function(t){"use strict";a=t},t}()},{"./console":5,"./now":14,"./uid":17}],8:[function(t,e){function n(t,e,n,i,r,s,o,a){if(!t){var c,u,h;throw void 0===e?c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(u=[n,i,r,s,o,a],h=0,c=new Error("Violation: "+e.replace(/%s/g,function(){return u[h++]}))),c.framesToPop=1,c}}e.exports=n},{}],9:[function(t,e){var n=(t("./camelize"),t("./subscriptions"));e.exports=function(t){var e=n(t);return{onStoreEvent:function(t,n,i){this._storefront_subscriptions||(this._storefront_subscriptions=e()),this._storefront_subscriptions.on(t,n,i)},componentWillUnmount:function(){this._storefront_subscriptions&&(this._storefront_subscriptions.release(),this._storefront_subscriptions=null)}}}},{"./camelize":4,"./subscriptions":16}],10:[function(t,e){function n(t){if(!("getOwnPropertyNames"in Object))return t.prototype;var e=(new t,{});return Object.getOwnPropertyNames(t.prototype).forEach(function(n){"constructor"!==n&&(e[n]=t.prototype[n])}),e}var i=t("elucidata-type");e.exports=function(t){var e={};i.isFunction(t)&&(t=n(t));for(var r in t){var s=t[r];i.isFunction(s)&&(e[r]=s)}return e}},{"elucidata-type":19}],11:[function(t,e){e.exports=function(t){var e=[];return e.concat.apply(e,t)}},{}],12:[function(t,e){(function(n){var i=(t("./merge"),t("./alias")),r=t("./bind-all"),s=t("./camelize"),o=t("./extract-methods"),a=t("elucidata-type");e.exports=function(){function t(t,e,n){"use strict";this.runtime=t,this.name=e,this.$Manager_instance=n,this.$Manager_handlers={},this.$Manager_notifyEvent=t.createEvent(e,"notify"),this.$Manager_changeEvent=t.createEvent(e,"change"),this.expose(this.$Manager_notifyEvent["public"]),this.expose(this.$Manager_changeEvent["public"]),this.expose({listen:this.$Manager_changeEvent["public"].onChange,unlisten:this.$Manager_changeEvent["public"].offChange}),r(this,"dispatch","notify","actions","waitFor","hasChanged","before","expose","get","before","createEvent","invoke"),i(this,"actions","action","observe","observes"),i(this,"get","getStore","getClerk"),i(this,"expose","exposes","outlet","outlets"),i(this,"createEvent","defineEvent"),i(this,"hasChanged","dataDidChange","dataHasChanged"),null==n.token&&(n.token=t.dispatcher.register(function(t){var e;(e=this.$Manager_handlers[t.type])&&e(t)}.bind(this)))}return t.prototype.dispatch=function(t,e,i){"use strict";return this.runtime.settings.aysncDispatch?n.nextTick(function(){this.runtime.dispatcher.dispatch({origin:this.name,type:t,payload:e},i)}.bind(this)):this.runtime.dispatcher.dispatch({origin:this.name,type:t,payload:e},i),this},t.prototype.invoke=function(t){"use strict";for(var e=[],n=1,i=arguments.length;i>n;n++)e.push(arguments[n]);var r=this.$Manager_instance[t];if(a.isFunction(r))return r.apply(this.$Manager_instance,e);throw new Error("Method "+t+" not found!")},t.prototype.notify=function(t){"use strict";return this.$Manager_notifyEvent.emitNow(t),this},t.prototype.before=function(t){"use strict";return t=o(t),Object.keys(t).forEach(function(e){var n=this.name+"_"+e,i=t[e],r=this.dispatch.bind(this,n);i.displayName=n,this.$Manager_instance[e]=i.bind(this.$Manager_instance,r)}.bind(this)),this},t.prototype.actions=function(t,e){"use strict";return 1===arguments.length?(e=t,t=this.name):a.isObject(t)&&(t=t.name),e=o(e),Object.keys(e).forEach(function(n){var i=t+"_"+n,r=e[n];if(this.$Manager_handlers[i]=r,t==this.name&&!this.$Manager_instance[n]){var s={};s[n]=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();e(1===t.length?t[0]:t)},this.before(s)}}.bind(this)),this},t.prototype.waitFor=function(){"use strict";for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t=t.map(function(t){return a.isString(t)?this.runtime.get(t):t}.bind(this)),this.runtime.dispatcher.waitFor(t),this},t.prototype.hasChanged=function(){"use strict";return this.$Manager_changeEvent.emitFlat(arguments),this},t.prototype.expose=function(t){"use strict";return t=o(t),Object.keys(t).forEach(function(e){if(this.$Manager_instance.hasOwnProperty(e)){var n=this.$Manager_instance[e];if(!n.$Manager_isStub){var i=new Error("Redefining property "+e+" on store "+this.name);throw i.framesToPop=3,i}}this.$Manager_instance[e]=t[e]}.bind(this)),this},t.prototype.get=function(t){"use strict";return t?this.runtime.get(t,!0):this.$Manager_instance},t.prototype.createEvent=function(t,e){"use strict";e=e||{};var n=this.runtime.createEvent(name,t,e),i=e.async?n.emit.bind(n):n.emitNow.bindNow(n);return this.expose(n["public"]),this.$Manager_instance["emit"+s(t)]=i,i},t.prototype.resetInternals=function(){"use strict";this.$Manager_handlers={},this.$Manager_instance.token&&this.runtime.dispatcher.deregister(this.$Manager_instance.token),Object.keys(this.$Manager_instance).forEach(function(t){"name"!==t&&delete this.$Manager_instance[t]}.bind(this))},t}()}).call(this,t("_process"))},{"./alias":2,"./bind-all":3,"./camelize":4,"./extract-methods":10,"./merge":13,_process:18,"elucidata-type":19}],13:[function(t,e){e.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return t.forEach(function(t){Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}},{}],14:[function(t,e){var n=function(){return"object"==typeof performance&&performance.now?performance.now.bind(performance):Date.now?Date.now.bind(Date):function(){return(new Date).getTime()}}();e.exports=n},{}],15:[function(t,e){(function(n,i){function r(t){"use strict";this.$Runtime_emitter=new o,this.$Runtime_emitter.setMaxListeners(0),this.$Runtime_registry={},this.$Runtime_managers={},this.$Runtime_builders=[],this.$Runtime_events={},this.$Runtime_anyChangeEvent=this.createEvent("*","any-change"),this.$Runtime_dataChanges=[],this.$Runtime_timer=!1,this.configure(t),this.dispatcher=this.settings.singletonDispatcher?s.getInstance():new s,this.util={eventHelperMixin:_(this),subscriptions:b(this),ensure:u,kind:c,camelize:h,merge:p,flatten:f,uid:l,alias:m,bindAll:v,now:d},this.mixins={eventHelper:_(this),subscriptions:b(this)},m(this,"get","getInstance")}var s=t("./dispatcher"),o=t("eventemitter3"),a=t("./manager"),c=t("elucidata-type"),u=t("./ensure"),h=t("./camelize"),p=t("./merge"),f=t("./flatten"),l=t("./uid"),m=t("./alias"),d=t("./now"),g=t("./console"),v=t("./bind-all"),y=t("./create-event"),_=t("./event-helper-mixin"),b=t("./subscriptions");r.prototype.configure=function(t){"use strict";return this.settings=p({asyncDispatch:!0,freezeInstance:!1,useRAF:!0,verbose:!1,logging:!1,singletonDispatcher:!1},t||{}),s.enableLogging(this.settings.logging),this},r.prototype.newInstance=function(t){"use strict";return new r(t||this.settings)},r.prototype.createEvent=function(t,e,n){"use strict";var i=y(t,e,this.$Runtime_emitter,n);return this.$Runtime_events[i.name]||(this.$Runtime_events[i.name]=i),this.$Runtime_events[i.name]},r.prototype.knownEvents=function(){"use strict";return Object.keys(this.$Runtime_events)},r.prototype.define=function(t,e){"use strict";return c.isUndefined(e)&&(e=t,t=l()),this.$Runtime_buildFactory(t,e)},r.prototype.get=function(t,e){"use strict";var n=this.$Runtime_registry[t];return n||(this.$Runtime_warn("Storefront: Store",t,"is not defined."),e===!0&&(this.$Runtime_info("Storefront: Building stub for",t),n={name:t},this.$Runtime_registry[t]=n)),n},r.prototype.getManager=function(t){"use strict";return this.$Runtime_managers[t]},r.prototype.hasStore=function(t){"use strict";return this.$Runtime_registry.hasOwnProperty(t)},r.prototype.onChange=function(t){"use strict";return this.$Runtime_anyChangeEvent["public"].onAnyChange(t),this},r.prototype.offChange=function(t){"use strict";return this.$Runtime_anyChangeEvent["public"].offAnyChange(t),this},r.prototype.size=function(){"use strict";return this.storeNames().length},r.prototype.storeNames=function(){"use strict";return Object.keys(this.$Runtime_registry)},r.prototype.recreateStore=function(t){"use strict";var e=this.getManager(t);return e&&e.resetInternals(),this.$Runtime_builders.filter(function(e){return e.name===t}).forEach(function(t){this.$Runtime_buildFactory(t.name,t.builder,!1)}.bind(this)),this.get(t)},r.prototype.$Runtime_buildFactory=function(t,e,n){"use strict";var i,r=this.$Runtime_registry[t],s=this.$Runtime_managers[t];if(r&&this.$Runtime_warn("Storefront:",t,"already defined: Merging definitions."),r||(r={name:t},this.$Runtime_registry[t]=r),s||(s=new a(this,t,r),this.$Runtime_managers[t]=s,this.$Runtime_trackChangeFor(t)),c.isFunction(e))i=e(s);else{if(!c.isObject(e))throw new Error("Wrong builder type: Must provide a builder function or object.");i=e}return c.isObject(i)&&s.expose(i),this.settings.freezeInstance===!0&&Object.freeze(r),n!==!1&&this.$Runtime_builders.push({name:t,builder:e,manager:s}),this.get(t)},r.prototype.$Runtime_trackChangeFor=function(t){"use strict";var e=t+":change";this.$Runtime_emitter.on(e,function(){this.$Runtime_dataChanges.push({type:e,params:Array.prototype.slice.call(arguments)}),this.$Runtime_timer||(this.settings.useRAF&&i.requestAnimationFrame?requestAnimationFrame(this.$Runtime_relayDataChanges.bind(this)):n.nextTick(this.$Runtime_relayDataChanges.bind(this)),this.$Runtime_timer=!0)}.bind(this))},r.prototype.$Runtime_stopTrackingChangesFor=function(t){"use strict";var e=t+":change";this.$Runtime_emitter.removeListener(e)},r.prototype.$Runtime_relayDataChanges=function(){"use strict";this.$Runtime_dataChanges.length&&(this.$Runtime_anyChangeEvent.emitNow(this.$Runtime_dataChanges),this.$Runtime_dataChanges=[]),this.$Runtime_timer=!1},r.prototype.$Runtime_warn=function(){"use strict";this.settings.verbose&&g.warn.apply(g,arguments)},r.prototype.$Runtime_info=function(){"use strict";this.settings.verbose&&g.info.apply(g,arguments)},e.exports=r}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./alias":2,"./bind-all":3,"./camelize":4,"./console":5,"./create-event":6,"./dispatcher":7,"./ensure":8,"./event-helper-mixin":9,"./flatten":11,"./manager":12,"./merge":13,"./now":14,"./subscriptions":16,"./uid":17,_process:18,"elucidata-type":19,eventemitter3:20}],16:[function(t,e){function n(t){"use strict";this.$Subscriptions_runtime=t,this.$Subscriptions_storeListeners=[],r(this,"on","onStoreEvent","onEvent"),r(this,"release","off","releaseAll")}var i=t("./camelize"),r=t("./alias");n.prototype.size=function(){"use strict";return this.$Subscriptions_storeListeners.length},n.prototype.on=function(t,e,n){"use strict";t=t.name||t;var r,s=this.$Subscriptions_runtime.getInstance(t);return s?(e=i(e),(r=s["on"+e])?(r(n),this.$Subscriptions_storeListeners.push({storeName:t,eventName:e,callback:n})):this.$Subscriptions_runtime.settings.verbose&&console.warn("Storefront: Event",e,"isn't supported by store:",t)):this.$Subscriptions_runtime.settings.verbose&&console.warn("Storefront: Store",t,"not found"),this},n.prototype.release=function(){"use strict";return this.$Subscriptions_storeListeners.forEach(function(t){var e=t,n=e.storeName,i=e.eventName,r=e.callback,s=this.$Subscriptions_runtime.getInstance(n);s["off"+i](r)}.bind(this)),this.$Subscriptions_storeListeners.length=0,this.$Subscriptions_storeListeners=[],this},e.exports=function(t){return function(){return new n(t)}}},{"./alias":2,"./camelize":4}],17:[function(t,e){function n(t){var e=Math.floor((new Date).getTime()/1e3);for(t=t||36;i>=e;)e+=1;return i=e,e.toString(t)}var i=0;e.exports=n},{}],18:[function(t,e){function n(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var i=[];if(e){var r=document.createElement("div"),s=new MutationObserver(function(){var t=i.slice();i.length=0,t.forEach(function(t){t()})});return s.observe(r,{attributes:!0}),function(t){i.length||r.setAttribute("yes","no"),i.push(t)}}return n?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),i.length>0)){var n=i.shift();n()}},!0),function(t){i.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")}},{}],19:[function(t,e){(function(){var t,n,i,r,s,o,a,c,u;for(u="Boolean Number String Function Array Date RegExp Undefined Null NodeList".split(" "),i=/element$/,o=Object.keys||function(t){var e,n,i;i=[];for(e in t)n=t[e],i.push(e);return i},n=function(){var t,e,n,i,r,s;for(i=Object.prototype.toString,e=/\[object HTML(.*)\]/,t={},r=0,s=u.length;s>r;r++)n=u[r],t["[object "+n+"]"]=n.toLowerCase();return function(n){var r,s;return s=i.call(n),(r=t[s])?r:(r=s.match(e))?r[1].toLowerCase():"object"}}(),c=u.concat(["Object"]),r=function(t){var e;return e=t.toLowerCase(),n["is"+t]=function(t){return n(t)===e},n["isNot"+t]=function(t){return n(t)!==e}},s=0,a=c.length;a>s;s++)t=c[s],r(t);n.isEmpty=function(t){switch(n(t)){case"null":return!0;case"undefined":return!0;case"string":return""===t;case"object":return 0===o(t).length;case"array":return 0===t.length;case"number":return isNaN(t);case"nodelist":return 0===t.length;default:return!1}},n.isNotEmpty=function(t){return!n.isEmpty(t)},n.isElement=function(t){return i.test(n(t))},n.isNotElement=function(t){return!n.isElement(t)},"undefined"!=typeof e&&null!==e?e.exports=n:this.type=n}).call(this)},{}],20:[function(t,e){"use strict";function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){}var r="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.listeners=function(t,e){var n=r?r+t:t,i=this._events&&this._events[n];if(e)return!!i;if(!i)return[];if(this._events[n].fn)return[this._events[n].fn];for(var s=0,o=this._events[n].length,a=new Array(o);o>s;s++)a[s]=this._events[n][s].fn;return a},i.prototype.emit=function(t,e,n,i,s,o){var a=r?r+t:t;if(!this._events||!this._events[a])return!1;var c,u,h=this._events[a],p=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,s),!0;case 6:return h.fn.call(h.context,e,n,i,s,o),!0}for(u=1,c=new Array(p-1);p>u;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var f,l=h.length;for(u=0;l>u;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),p){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,n);break;default:if(!c)for(f=1,c=new Array(p-1);p>f;f++)c[f-1]=arguments[f];h[u].fn.apply(h[u].context,c)}}return!0},i.prototype.on=function(t,e,i){var s=new n(e,i||this),o=r?r+t:t;return this._events||(this._events=r?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],s]:this._events[o].push(s):this._events[o]=s,this},i.prototype.once=function(t,e,i){var s=new n(e,i||this,!0),o=r?r+t:t;return this._events||(this._events=r?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],s]:this._events[o].push(s):this._events[o]=s,this},i.prototype.removeListener=function(t,e,n,i){var s=r?r+t:t;if(!this._events||!this._events[s])return this;var o=this._events[s],a=[];if(e)if(o.fn)(o.fn!==e||i&&!o.once||n&&o.context!==n)&&a.push(o);else for(var c=0,u=o.length;u>c;c++)(o[c].fn!==e||i&&!o[c].once||n&&o[c].context!==n)&&a.push(o[c]);return a.length?this._events[s]=1===a.length?a[0]:a:delete this._events[s],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[r?r+t:t]:this._events=r?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=r,e.exports=i},{}]},{},[1])(1)});