!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Storefront=t()}}(function(){return function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e){var n=t("./lib/runtime");e.exports=new n},{"./lib/runtime":12}],2:[function(t,e){e.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),n=t.shift(),i=e[n];t.forEach(function(t){e[t]=i})}},{}],3:[function(t,e){var n=t("elucidata-type");e.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return t.forEach(function(t){var i=e[t];i&&n.isFunction(i)&&(e[t]=i.bind(e))}),e}},{"elucidata-type":16}],4:[function(t,e){e.exports=function(t){return t.replace(/(?:^|[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""})}},{}],5:[function(t,e){(function(n){var i=t("./camelize"),r=t("./flatten");e.exports=function(t,e,s){var o=t+":"+e,a={name:o,"public":{},emit:function(){var t=Array.prototype.slice.call(arguments);t.unshift(o),n.nextTick(function(){s.emit.apply(s,t)})},emitNow:function(){var t=Array.prototype.slice.call(arguments);t.unshift(o),s.emit.apply(s,t)},emitFlat:function(){var t=r([o].concat(Array.prototype.slice.call(arguments)));n.nextTick(function(){s.emit.apply(s,t)})}};return a.public["on"+i(e)]=function(t){s.on(o,t)},a.public["off"+i(e)]=function(t){s.removeListener(o,t)},a}}).call(this,t("_process"))},{"./camelize":4,"./flatten":8,_process:15}],6:[function(t,e){(function(n){function i(){"use strict";this.$Dispatcher_handlers={},this.$Dispatcher_processed={},this.$Dispatcher_tokenList=[],this.$Dispatcher_queue=[],this.active=!1}var r=t("./uid"),s=t("./now"),o=10;i.prototype.$Dispatcher_destructor=function(){"use strict";this.$Dispatcher_handlers=null,this.$Dispatcher_processed=null,this.$Dispatcher_tokenList=null,this.$Dispatcher_queue=null,this.active=!1},i.prototype.dispose=function(){"use strict";this.$Dispatcher_destructor()},i.prototype.register=function(t,e){"use strict";e&&this.$Dispatcher_handlers.hasOwnProperty(e)&&(e=r());var n=e||r();return this.$Dispatcher_handlers[n]=t,this.$Dispatcher_tokenList=Object.keys(this.$Dispatcher_handlers),n},i.prototype.deregister=function(t){"use strict";var e;return(e=this.$Dispatcher_handlers[t])&&delete this.$Dispatcher_handlers[t],e},i.prototype.waitFor=function(t){"use strict";if(!this.active)return this;for(var e=0,n=t.length;n>e;e++){var i=t[e].token||t[e];this.$Dispatcher_callHandler(i)}return this},i.prototype.dispatch=function(t,e){"use strict";if(this.active)return this.$Dispatcher_queue.push([t,e]),this;var i,r,a=this.$Dispatcher_tokenList.length,u=0;if(a){for(i=s(),this.active=!0,this.$Dispatcher_currentAction=t,this.$Dispatcher_processed={};a>u;)this.$Dispatcher_callHandler(this.$Dispatcher_tokenList[u]),u+=1;this.$Dispatcher_currentAction=null,this.active=!1,r=s()-i,r>o&&n.console.info("Dispatch of",t.type,"took >",o,"ms")}if(e&&e(),this.$Dispatcher_queue.length){var c=this.$Dispatcher_queue.shift();this.dispatch(c[0],c[1])}return this},i.prototype.$Dispatcher_callHandler=function(t){"use strict";if(this.$Dispatcher_processed[t]!==!0&&this.active){var e=this.$Dispatcher_handlers[t];e.call(this,this.$Dispatcher_currentAction,this,t),this.$Dispatcher_processed[t]=!0}},i.getInstance=function(){"use strict";return null===a&&(a=new i),a};var a=null;e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./now":11,"./uid":13}],7:[function(t,e){var n=t("./camelize");e.exports=function(t){return{onStoreEvent:function(e,i,r){e=e.name||e;var s,o=t.getInstance(e);o&&(i=n(i),(s=o["on"+i])?(s(r),this._storeListeners||(this._storeListeners=[]),this._storeListeners.push({storeName:e,eventName:i,callback:r})):t.settings.verbose&&console.warn("Storefront: Event",i,"isn't supported by store:",e))},componentWillUnmount:function(){this._storeListeners&&(this._storeListeners.forEach(function(e){var n=e,i=n.storeName,r=n.eventName,s=n.callback,o=t.getInstance(i);o["off"+r](s)}),this._storeListeners.length=0,this._storeListeners=null)}}}},{"./camelize":4}],8:[function(t,e){e.exports=function(t){var e=[];return e.concat.apply(e,t)}},{}],9:[function(t,e){(function(n){var i=(t("./merge"),t("./alias")),r=t("./bind-all"),s=t("./camelize"),o=t("elucidata-type");e.exports=function(){function t(t,e,n){"use strict";this.runtime=t,this.name=e,this.$Manager_instance=n,this.$Manager_handlers={},this.$Manager_notifyEvent=t.createEvent(e,"notify"),this.$Manager_changeEvent=t.createEvent(e,"change"),this.expose(this.$Manager_notifyEvent.public),this.expose(this.$Manager_changeEvent.public),r(this,"dispatch","notify","actions","waitFor","hasChanged","before","expose","getClerk","getStore","createEvent","invoke"),i(this,"actions","action","observe","observes"),i(this,"getStore","get"),i(this,"expose","exposes","outlet","outlets"),i(this,"createEvent","defineEvent"),i(this,"hasChanged","dataDidChange","dataHasChanged"),null==n.token&&(n.token=t.dispatcher.register(function(t){var e;(e=this.$Manager_handlers[t.type])&&e(t)}.bind(this)))}return t.prototype.dispatch=function(t,e,i){"use strict";return this.runtime.settings.aysncDispatch?n.nextTick(function(){this.runtime.dispatcher.dispatch({origin:this.name,type:t,payload:e},i)}.bind(this)):this.runtime.dispatcher.dispatch({origin:this.name,type:t,payload:e},i),this},t.prototype.invoke=function(t){"use strict";for(var e=[],n=1,i=arguments.length;i>n;n++)e.push(arguments[n]);return this.$Manager_instance[t].apply(this.$Manager_instance,e)},t.prototype.notify=function(t){"use strict";return this.$Manager_notifyEvent.emit(t),this},t.prototype.before=function(t){"use strict";return Object.keys(t).forEach(function(e){var n=this.name+"_"+e,i=t[e],r=this.dispatch.bind(this,n);i.displayName=n,this.$Manager_instance[e]=i.bind(this.$Manager_instance,r)}.bind(this)),this},t.prototype.actions=function(t,e){"use strict";return 1===arguments.length?(e=t,t=this.name):o.isObject(t)&&(t=t.name),Object.keys(e).forEach(function(n){var i=t+"_"+n,r=e[n];if(this.$Manager_handlers[i]=r,t==this.name&&!this.$Manager_instance[n]){var s={};s[n]=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();e(1===t.length?t[0]:t)},this.before(s)}}.bind(this)),this},t.prototype.waitFor=function(){"use strict";for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t=t.map(function(t){return o.isString(t)?this.runtime.get(t):t}.bind(this)),this.runtime.dispatcher.waitFor(t),this},t.prototype.hasChanged=function(){"use strict";return this.$Manager_changeEvent.emitFlat(arguments),this},t.prototype.expose=function(t){"use strict";return Object.keys(t).forEach(function(e){if(this.$Manager_instance.hasOwnProperty(e)){var n=this.$Manager_instance[e];if(!n.$Manager_isStub){var i=new Error("Redefining property "+e+" on store "+this.name);throw i.framesToPop=3,i}}this.$Manager_instance[e]=t[e]}.bind(this)),this},t.prototype.getClerk=function(){"use strict";return this.$Manager_instance},t.prototype.getStore=function(t){"use strict";return t?this.runtime.get(t,!0):this.$Manager_instance},t.prototype.createEvent=function(t){"use strict";var e=this.runtime.createEvent(name,t),n=e.emit.bind(e);return this.expose(e.public),this.$Manager_instance["emit"+s(t)]=n,n},t.prototype.resetInternals=function(){"use strict";this.$Manager_handlers={},this.$Manager_instance.token&&this.runtime.dispatcher.deregister(this.$Manager_instance.token),Object.keys(this.$Manager_instance).forEach(function(t){"name"!==t&&delete this.$Manager_instance[t]}.bind(this))},t}()}).call(this,t("_process"))},{"./alias":2,"./bind-all":3,"./camelize":4,"./merge":10,_process:15,"elucidata-type":16}],10:[function(t,e){e.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return t.forEach(function(t){Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}},{}],11:[function(t,e){var n=function(){return"object"==typeof performance&&performance.now?performance.now.bind(performance):Date.now?Date.now.bind(Date):function(){return(new Date).getTime()}}();e.exports=n},{}],12:[function(t,e){(function(n,i){function r(t){"use strict";o.call(this),this.configure(t),this.$Runtime_registry={},this.$Runtime_managers={},this.$Runtime_builders=[],this.$Runtime_events={},this.$Runtime_anyChangeEvent=this.createEvent("*","any-change"),this.$Runtime_dataChanges=[],this.$Runtime_timer=!1,this.dispatcher=this.settings.singletonDispatcher?s.getInstance():new s,this.mixins={eventHelper:l(this)},p(this,"get","getInstance")}var s=t("./dispatcher"),o=t("events").EventEmitter,a=t("./manager"),u=t("elucidata-type"),c=(t("./camelize"),t("./merge")),h=(t("./flatten"),t("./uid")),p=t("./alias"),f=(t("./bind-all"),t("./create-event")),l=t("./event-helper-mixin");for(var m in o)o.hasOwnProperty(m)&&(r[m]=o[m]);var d=null===o?null:o.prototype;r.prototype=Object.create(d),r.prototype.constructor=r,r.__superConstructor__=o,r.prototype.configure=function(t){"use strict";return this.settings=c({asyncDispatch:!0,freezeInstance:!1,useRAF:!0,verbose:!1,singletonDispatcher:!1},t||{}),this},r.prototype.newInstance=function(){"use strict";return new r(this.settings)},r.prototype.createEvent=function(t,e){"use strict";var n=f(t,e,this);return this.$Runtime_events[n.name]||(this.$Runtime_events[n.name]=n),this.$Runtime_events[n.name]},r.prototype.knownEvents=function(){"use strict";return Object.keys(this.$Runtime_events)},r.prototype.define=function(t,e){"use strict";return u.isUndefined(e)&&(e=t,t=h()),this.$Runtime_buildFactory(t,e)},r.prototype.get=function(t,e){"use strict";var n=this.$Runtime_registry[t];return n||(this.settings.verbose&&console.warn("Storefront: Store",t,"is not defined."),e===!0&&(this.settings.verbose&&console.info("Building stub for ",t),n={name:t},this.$Runtime_registry[t]=n)),n},r.prototype.getManager=function(t){"use strict";return this.$Runtime_managers[t]},r.prototype.hasStore=function(t){"use strict";return this.$Runtime_registry.hasOwnProperty(t)},r.prototype.onChange=function(t){"use strict";return this.$Runtime_anyChangeEvent.public.onAnyChange(t),this},r.prototype.offChange=function(t){"use strict";return this.$Runtime_anyChangeEvent.public.offAnyChange(t),this},r.prototype.size=function(){"use strict";return this.storeNames().length},r.prototype.storeNames=function(){"use strict";return Object.keys(this.$Runtime_registry)},r.prototype.recreateStore=function(t){"use strict";var e=this.getManager(t);return e&&e.resetInternals(),this.$Runtime_builders.filter(function(e){return e.name===t}).forEach(function(t){this.$Runtime_buildFactory(t.name,t.builder,!1)}.bind(this)),this.get(t)},r.prototype.$Runtime_buildFactory=function(t,e,n){"use strict";var i,r=this.$Runtime_registry[t],s=this.$Runtime_managers[t];if(r&&this.settings.verbose&&console.warn(t,"already defined: Merging definitions."),r||(r={name:t},this.$Runtime_registry[t]=r),s||(s=new a(this,t,r),this.$Runtime_managers[t]=s,this.$Runtime_trackChangeFor(t)),u.isFunction(e))i=e(s);else{if(!u.isObject(e))throw new Error("Wrong builder type: Must provide a builder function or object.");i=e}return u.isObject(i)&&s.expose(i),this.settings.freezeInstance===!0&&Object.freeze(r),n!==!1&&this.$Runtime_builders.push({name:t,builder:e,manager:s}),this.get(t)},r.prototype.$Runtime_trackChangeFor=function(t){"use strict";var e=t+":change";this.on(e,function(){this.$Runtime_dataChanges.push({type:e,params:Array.prototype.slice.call(arguments)}),this.$Runtime_timer||(this.settings.useRAF&&i.requestAnimationFrame?requestAnimationFrame(this.$Runtime_relayDataChanges.bind(this)):n.nextTick(this.$Runtime_relayDataChanges.bind(this)),this.$Runtime_timer=!0)}.bind(this))},r.prototype.$Runtime_relayDataChanges=function(){"use strict";this.$Runtime_dataChanges.length&&(this.$Runtime_anyChangeEvent.emitNow(this.$Runtime_dataChanges),this.$Runtime_dataChanges=[]),this.$Runtime_timer=!1},e.exports=r}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./alias":2,"./bind-all":3,"./camelize":4,"./create-event":5,"./dispatcher":6,"./event-helper-mixin":7,"./flatten":8,"./manager":9,"./merge":10,"./uid":13,_process:15,"elucidata-type":16,events:14}],13:[function(t,e){function n(t){var e=Math.floor((new Date).getTime()/1e3);for(t=t||36;i>=e;)e+=1;return i=e,e.toString(t)}var i=0;e.exports=n},{}],14:[function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),u=1;r>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(s(n)){for(r=arguments.length,a=new Array(r-1),u=1;r>u;u++)a[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,a)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var r;r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=o;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],15:[function(t,e){function n(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var i=[];if(e){var r=document.createElement("div"),s=new MutationObserver(function(){var t=i.slice();i.length=0,t.forEach(function(t){t()})});return s.observe(r,{attributes:!0}),function(t){i.length||r.setAttribute("yes","no"),i.push(t)}}return n?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),i.length>0)){var n=i.shift();n()}},!0),function(t){i.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")}},{}],16:[function(t,e){(function(){var t,n,i,r,s,o,a,u,c;for(c="Boolean Number String Function Array Date RegExp Undefined Null NodeList".split(" "),i=/element$/,o=Object.keys||function(t){var e,n,i;i=[];for(e in t)n=t[e],i.push(e);return i},n=function(){var t,e,n,i,r,s;for(i=Object.prototype.toString,e=/\[object HTML(.*)\]/,t={},r=0,s=c.length;s>r;r++)n=c[r],t["[object "+n+"]"]=n.toLowerCase();return function(n){var r,s;return s=i.call(n),(r=t[s])?r:(r=s.match(e))?r[1].toLowerCase():"object"}}(),u=c.concat(["Object"]),r=function(t){var e;return e=t.toLowerCase(),n["is"+t]=function(t){return n(t)===e},n["isNot"+t]=function(t){return n(t)!==e}},s=0,a=u.length;a>s;s++)t=u[s],r(t);n.isEmpty=function(t){switch(n(t)){case"null":return!0;case"undefined":return!0;case"string":return""===t;case"object":return 0===o(t).length;case"array":return 0===t.length;case"number":return isNaN(t);case"nodelist":return 0===t.length;default:return!1}},n.isNotEmpty=function(t){return!n.isEmpty(t)},n.isElement=function(t){return i.test(n(t))},n.isNotElement=function(t){return!n.isElement(t)},"undefined"!=typeof e&&null!==e?e.exports=n:this.type=n}).call(this)},{}]},{},[1])(1)});