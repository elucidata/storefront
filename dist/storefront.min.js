!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Storefront=e()}}(function(){return function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return i(n?n:e)},h,h.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){t.exports=e("./lib/core")},{"./lib/core":4}],2:[function(e,t){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift(),r=t[n];e.forEach(function(e){t[e]=r})}},{}],3:[function(e,t){t.exports=function(e){return e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t?t.toUpperCase():""})}},{}],4:[function(e,t){var n=e("./runtime"),r=e("./alias"),i=new n;t.exports={define:function(e,t){return i.defineComposite(e,t)},defineStore:function(e,t){return i.defineStore(e,t)},defineClerk:function(e,t){return i.defineClerk(e,t)},get:function(e){return i.getInstance(e)},configure:function(e){return i.configure(e),this},onChange:function(e){return i.onAnyChange(e),this},offChange:function(e){return i.offAnyChange(e),this},mixins:{eventHelper:e("./event-helper-mixin")(i)},_internals:i},r(t.exports,"defineStore","Store"),r(t.exports,"defineClerk","Clerk")},{"./alias":2,"./event-helper-mixin":6,"./runtime":12}],5:[function(e,t){function n(){"use strict";this.$Dispatcher_handlers={},this.$Dispatcher_processed={},this.$Dispatcher_tokenList=[],this.$Dispatcher_queue=[],this.active=!1}var r=e("./uid"),i=e("./now"),s=10;n.prototype.$Dispatcher_destructor=function(){"use strict";this.$Dispatcher_handlers=null,this.$Dispatcher_processed=null,this.$Dispatcher_tokenList=null,this.$Dispatcher_queue=null,this.active=!1},n.prototype.dispose=function(){"use strict";this.$Dispatcher_destructor()},n.prototype.register=function(e,t){"use strict";t&&this.$Dispatcher_handlers.hasOwnProperty(t)&&(t=r());var n=t||r();return this.$Dispatcher_handlers[n]=e,this.$Dispatcher_tokenList=Object.keys(this.$Dispatcher_handlers),n},n.prototype.deregister=function(e){"use strict";var t;return(t=this.$Dispatcher_handlers[e])&&delete this.$Dispatcher_handlers[e],t},n.prototype.waitFor=function(e){"use strict";if(!this.active)return this;for(var t=0,n=e.length;n>t;t++){var r=e[t].token||e[t];this.$Dispatcher_callHandler(r)}return this},n.prototype.dispatch=function(e,t){"use strict";if(this.active)return this.$Dispatcher_queue.push([e,t]),this;var n,r,o=this.$Dispatcher_tokenList.length,a=0;if(o){for(n=i(),this.active=!0,this.$Dispatcher_currentAction=e,this.$Dispatcher_processed={};o>a;)this.$Dispatcher_callHandler(this.$Dispatcher_tokenList[a]),a+=1;this.$Dispatcher_currentAction=null,this.active=!1,r=i()-n,r>s&&window.console.info("Dispatch of",e.type,"took >",s,"ms")}if(t&&t(),this.$Dispatcher_queue.length){var u=this.$Dispatcher_queue.shift();this.dispatch(u[0],u[1])}return this},n.prototype.$Dispatcher_callHandler=function(e){"use strict";if(this.$Dispatcher_processed[e]!==!0&&this.active){var t=this.$Dispatcher_handlers[e];t.call(this,this.$Dispatcher_currentAction,this,e),this.$Dispatcher_processed[e]=!0}},n.getInstance=function(){"use strict";return null===o&&(o=new n),o};var o=null;t.exports=n},{"./now":11,"./uid":13}],6:[function(e,t){var n=e("./camelize");t.exports=function(e){return{onStoreEvent:function(t,r,i){t=t.name||t;var s,o=e.getInstance(t);o&&(r=n(r),(s=o["on"+r])?(s(i),this._storeListeners||(this._storeListeners=[]),this._storeListeners.push({storeName:t,eventName:r,callback:i})):e.settings.verbose&&console.warn("Storefront: Event",r,"isn't supported by store:",t))},componentWillUnmount:function(){this._storeListeners&&(this._storeListeners.forEach(function(t){var n=t,r=n.storeName,i=n.eventName,s=n.callback,o=e.getInstance(r);o["off"+i](s)}),this._storeListeners.length=0,this._storeListeners=null)}}}},{"./camelize":3}],7:[function(e,t){var n=e("elucidata-type"),r=e("./manager");t.exports=function(e,t,i,s,o){o=o||{},o.name=o.name||t;var a,u=r(e,t,i,o);if(n.isFunction(s))a=s(u);else{if(!n.isObject(s))throw new Error("Wrong builder type: Must provide a builder function or object.");a=s}return n.isObject(a)&&u.exposes(a),null==o.token&&(o.token=e.dispatcher.register(function(e){var t;(t=o._handlers[e.type])&&t(e)})),null==o._handlers&&(o._handlers={}),o}},{"./manager":9,"elucidata-type":16}],8:[function(e,t){t.exports=function(e){var t=[];return t.concat.apply(t,e)}},{}],9:[function(e,t){(function(n){var r=e("./merge"),i=e("./alias"),s=e("./camelize"),o=e("elucidata-type");t.exports=function(e,t,a,u){u=u||{};var c={_name:t,_type:a,_instance:u,exposes:function(e){Object.keys(e).forEach(function(t){u[t]=e[t]})},getStore:function(t){return t?e.getInstance(t):u},createEvent:function(n){var r=e.createEvent(t,n),i=r.emit.bind(r);return c.exposes(r.public),u["emit"+s(n)]=i,i}};if(i(c,"exposes","expose"),i(c,"createEvent","defineEvent"),"clerk"===a||"*"===a){var h=function(r,i,s){n.nextTick(function(){e.dispatcher.dispatch({origin:t,type:r,payload:i},s)})};h.send=h,c=r(c,{actions:function(e){Object.keys(e).forEach(function(n){var r=t+"_"+n,i=e[n],s=h.bind(null,r);i.displayName=r,u[n]=i.bind(u,s)})}}),i(c,"actions","action")}if("store"===a||"*"===a){var f=e.createEvent(t,"notify"),p=e.createEvent(t,"change");u._handlers||(u._handlers={}),c=r(c,{_handlers:{},waitFor:function(){for(var t=[],n=0,r=arguments.length;r>n;n++)t.push(arguments[n]);return e.dispatcher.waitFor(t)},hasChanged:function(){p.emitFlat(arguments)},notify:function(e){f.emit(e)},handles:function(e,n){1===arguments.length?(n=e,e=t):o.isObject(e)&&(e=e.name);var r=function(t){return e+"_"+t};Object.keys(n).forEach(function(e){var t=r(e),i=n[e];u._handlers[t]=i})},getClerk:function(){return u}}),i(c,"handles","handle","observes","observe"),i(c,"hasChanged","dataDidChange","dataHasChanged"),i(c,"exposes","provides","provide"),c.exposes(p.public),c.exposes(f.public)}return c}}).call(this,e("_process"))},{"./alias":2,"./camelize":3,"./merge":10,_process:15,"elucidata-type":16}],10:[function(e,t){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return e.forEach(function(e){Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}},{}],11:[function(e,t){var n=function(){return"object"==typeof performance&&performance.now?performance.now.bind(performance):Date.now?Date.now.bind(Date):function(){return(new Date).getTime()}}();t.exports=n},{}],12:[function(e,t){(function(n){function r(){"use strict";s.call(this),this.dispatcher=i.getInstance(),this.registry={},this.builders=[],this.events={},this.$Runtime_anyChangeEvent=this.createEvent("*","any-change"),this.$Runtime_dataChanges=[],this.$Runtime_timer=!1,this.configure()}var i=e("./dispatcher"),s=e("events").EventEmitter,o=e("./camelize"),a=e("./merge"),u=e("./flatten"),c=e("./factory");for(var h in s)s.hasOwnProperty(h)&&(r[h]=s[h]);var f=null===s?null:s.prototype;r.prototype=Object.create(f),r.prototype.constructor=r,r.__superConstructor__=s,r.prototype.configure=function(e){"use strict";this.settings=a({useRAF:!1,verbose:!0},e||{})},r.prototype.createEvent=function(e,t){"use strict";var r=e+":"+t,i=null;return(i=this.events[r])?i:(i={"public":{},emit:function(){var e=Array.prototype.slice.call(arguments);e.unshift(r),n.nextTick(function(){this.emit.apply(this,e)}.bind(this))}.bind(this),emitNow:function(){var e=Array.prototype.slice.call(arguments);e.unshift(r),this.emit.apply(this,e)}.bind(this),emitFlat:function(){var e=u([r].concat(Array.prototype.slice.call(arguments)));n.nextTick(function(){this.emit.apply(this,e)}.bind(this))}.bind(this)},i.public["on"+o(t)]=function(e){this.on(r,e)}.bind(this),i.public["off"+o(t)]=function(e){this.removeListener(r,e)}.bind(this),this.events[r]=i,i)},r.prototype.knownEvents=function(){"use strict";return Object.keys(this.events)},r.prototype.defineComposite=function(e,t){"use strict";return this.$Runtime_buildFactory(e,"*",t)},r.prototype.defineStore=function(e,t){"use strict";return this.$Runtime_buildFactory(e,"store",t)},r.prototype.defineClerk=function(e,t){"use strict";return this.$Runtime_buildFactory(e,"clerk",t)},r.prototype.getInstance=function(e){"use strict";var t=this.registry[e];return!t&&this.settings.verbose&&console.warn("Storefront: Store",e,"is not defined."),t},r.prototype.hasStore=function(e){"use strict";return this.registry.hasOwnProperty(e)},r.prototype.onAnyChange=function(e){"use strict";this.$Runtime_anyChangeEvent.public.onAnyChange(e)},r.prototype.offAnyChange=function(e){"use strict";this.$Runtime_anyChangeEvent.public.offAnyChange(e)},r.prototype.recreateStore=function(e){"use strict";return delete this.registry[e],this.builders.filter(function(t){return t.name===e}).forEach(function(e){this.$Runtime_buildFactory(e.name,e.type,e.builder,!1)}.bind(this)),this.registry[e]},r.prototype.$Runtime_buildFactory=function(e,t,n,r){"use strict";var i=this.registry[e];return i&&this.settings.verbose&&console.warn(e,"already defined: Merging definitions."),i=c(this,e,t,n,i),this.registry[e]=i,r!==!1&&this.builders.push({name:e,type:t,builder:n}),i},r.prototype.$Runtime_trackChangeFor=function(e){"use strict";var t=e+":change";this.on(t,function(){this.$Runtime_dataChanges.push({type:t,params:Array.prototype.slice.call(arguments)}),this.$Runtime_timer||(n.nextTick(this.$Runtime_relayDataChanges.bind(this)),this.$Runtime_timer=!0)}.bind(this))},r.prototype.$Runtime_relayDataChanges=function(){"use strict";this.$Runtime_dataChanges.length&&(this.$Runtime_anyChangeEvent.emitNow(this.$Runtime_dataChanges),this.$Runtime_dataChanges=[]),this.$Runtime_timer=!1},t.exports=r}).call(this,e("_process"))},{"./camelize":3,"./dispatcher":5,"./factory":7,"./flatten":8,"./merge":10,_process:15,events:14}],13:[function(e,t){function n(e){var t=Math.floor((new Date).getTime()/1e3);for(e=e||36;r>=t;)t+=1;return r=t,t.toString(e)}var r=0;t.exports=n},{}],14:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(s(n)){for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];for(c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],15:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var i=document.createElement("div"),s=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return s.observe(i,{attributes:!0}),function(e){r.length||i.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],16:[function(e,t){(function(){var e,n,r,i,s,o,a,u,c;for(c="Boolean Number String Function Array Date RegExp Undefined Null NodeList".split(" "),r=/element$/,o=Object.keys||function(e){var t,n,r;r=[];for(t in e)n=e[t],r.push(t);return r},n=function(){var e,t,n,r,i,s;for(r=Object.prototype.toString,t=/\[object HTML(.*)\]/,e={},i=0,s=c.length;s>i;i++)n=c[i],e["[object "+n+"]"]=n.toLowerCase();return function(n){var i,s;return s=r.call(n),(i=e[s])?i:(i=s.match(t))?i[1].toLowerCase():"object"}}(),u=c.concat(["Object"]),i=function(e){var t;return t=e.toLowerCase(),n["is"+e]=function(e){return n(e)===t},n["isNot"+e]=function(e){return n(e)!==t}},s=0,a=u.length;a>s;s++)e=u[s],i(e);n.isEmpty=function(e){switch(n(e)){case"null":return!0;case"undefined":return!0;case"string":return""===e;case"object":return 0===o(e).length;case"array":return 0===e.length;case"number":return isNaN(e);case"nodelist":return 0===e.length;default:return!1}},n.isNotEmpty=function(e){return!n.isEmpty(e)},n.isElement=function(e){return r.test(n(e))},n.isNotElement=function(e){return!n.isElement(e)},"undefined"!=typeof t&&null!==t?t.exports=n:this.type=n}).call(this)},{}]},{},[1])(1)});